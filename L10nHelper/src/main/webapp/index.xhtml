<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">
    <f:view>
        <h:head>
            <title>L10N Helper</title>
        </h:head>
        <h:body>
            <h:outputStylesheet library="default" name="css/elements.css"/>
            <h:form id="contentForm" prependId="true">
                <br/><h1>L10N Helper</h1><br/>
                <p:growl id="growl" showDetail="false" life="2000"/>
                <h:panelGroup layout="block">
                    <p:fileUpload id="fileUpload" fileUploadListener="#{fileUploader.uploadFile}"
                                  mode="advanced" multiple="true" fileLimit="#{fileUploader.filesLimit}" dragDropSupport="true"
                                  process="@this" update="@this uploadedFilesTable :contentForm:growl" sizeLimit="1000000"
                                  allowTypes="/(\.|\/)(properties)$/"/>
                    <p:dataTable id="uploadedFilesTable" value="#{fileUploader.uploadedFiles}" var="file">
                        <f:facet name="header">
                            <p:commandButton id="processFilesButton" value="Process files"
                                             actionListener="#{fileUploader.processFiles()}"
                                             disabled="#{empty fileUploader.uploadedFiles}"
                                             process="@this" update=":contentForm:localizationTable :contentForm:growl"/>
                            <p:commandButton id="removeFilesButton" value="Remove files"
                                             actionListener="#{fileUploader.removeFiles()}"
                                             disabled="#{empty fileUploader.uploadedFiles}"
                                             process="@this" update="@this processFilesButton uploadedFilesTable
                                             :contentForm:localizationTable :contentForm:growl"/>
                        </f:facet>
                        <p:column headerText="File Name">
                            <h:outputText value="#{file.fileName}"/>
                        </p:column>
                        <p:column headerText="File Size">
                            <h:outputText value="#{file.size} KB"/>
                        </p:column>
                    </p:dataTable>
                    <br/>
                    <p:dataTable id="localizationTable" value="#{fileUploader.localizationTable}" var="row"
                                 paginator="true" paginatorPosition="both" pageLinks="10"
                                 rows="50" rowsPerPageTemplate="50, 100, 500, 1000"
                                 paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PageLinks} {LastPageLink} {RowsPerPageDropdown}"
                                 filteredValue="#{fileUploader.filteredRows}"
                                 sortBy="#{row.key}">
                        <f:facet name="header">
                            <h3><h:outputText value="Localization table"/></h3>
                        </f:facet>
                        <p:column filterBy="#{row.key}" sortBy="#{row.key}" headerText="Key">
                            <h:outputText value="#{row.key}"/>
                        </p:column>
                        <p:column filterBy="#{row.enValue}" sortBy="#{row.enValue}" headerText="EN">
                            <h:outputText value="#{row.enValue}"/>
                        </p:column>
                        <p:column filterBy="#{row.esValue}" sortBy="#{row.esValue}" headerText="ES">
                            <h:outputText value="#{row.esValue}"/>
                        </p:column>
                        <p:column filterBy="#{row.ruValue}" sortBy="#{row.ruValue}" headerText="RU">
                            <h:outputText value="#{row.ruValue}"/>
                        </p:column>
                    </p:dataTable>
                </h:panelGroup>
            </h:form>
        </h:body>
    </f:view>
</html>
